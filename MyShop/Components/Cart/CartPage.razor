@page "/Cart"

@if (userIsLoggedIn && !updatingData)
{
    <RadzenDataGrid Data="@CartProducts" TItem="Entities.CartProduct" Density="@Density.Default" AllowPaging="true" AllowSorting="true">
        <Columns>
            <RadzenDataGridColumn TItem="Entities.CartProduct" Property="Product.Name" Title="Name" />
            <RadzenDataGridColumn TItem="Entities.CartProduct" Property="Product.BrandName" Title="BrandName" />
            <RadzenDataGridColumn TItem="Entities.CartProduct" Property="Product.Price" Title="Price per Unit">
                <Template Context="CartProducts">
                    @string.Format(cultureInfo, "{0:C}", CartProducts.Product.Price)
                </Template>
            </RadzenDataGridColumn>
            @* <RadzenDataGridColumn TItem="Entities.CartProduct" Property="ProductQuantity" Title="Quantity">
                <Template Context="CartProducts">
                    <a href="Cart" class="btn custom-button" type="button" aria-haspopup="true" aria-expanded="false" style="padding: 0; padding-right: 3px">
                        <i class="bi bi-dash-square-fill" @onclick="() => DecreaseQuantity(CartProducts)"></i>
                    </a>
                    <span>@CartProducts.ProductQuantity</span>
                    <a href="Cart" class="btn custom-button" type="button" aria-haspopup="true" aria-expanded="false" style="padding: 0; padding-left: 3px">
                        <i class="bi bi-plus-square-fill" @onclick="() => IncreaseQuantity(CartProducts)"></i>
                    </a>
                </Template>
            </RadzenDataGridColumn> *@
            <RadzenDataGridColumn TItem="Entities.CartProduct" Property="ProductQuantity" Title="Quantity">
                <Template Context="cartProduct">
                    @{
                        int newQuantity = cartProduct.ProductQuantity;
                    }
                    <RadzenNumeric TValue="int" Value="@cartProduct.ProductQuantity" Min="0" Change="@(args => UpdateQuantity(cartProduct, args))" Style="width: 25%" />
                </Template>
            </RadzenDataGridColumn>
        </Columns>
    </RadzenDataGrid>
}
else if(updatingData)
{
    <h1>Loading....</h1>
}
else
{
    <h1>Cart unavailable, log in to continue...</h1>
}


